language: java

jdk:
  - openjdk8

script:
  - mvn test -B

before_deploy:
  - POM_VERSION=$(mvn -q -Dexec.executable=echo -Dexec.args='${project.version}' --non-recursive exec:exec)

# Releases config copied from https://docs.travis-ci.com/user/deployment/releases/ and secure key generated by following
# https://stackoverflow.com/questions/25302518/travis-ci-setup-releases-with-github-token#answer-57032190
deploy:
  provider: releases
  api_key:
    secure: cMLUPvRF9BG/ZfpVcqkllmACQw+RL1wQoLJrT6GnKaQam5HpNTNySB6EPv0ZHefgY9KhEoT9T3IYSk9DPUy4753hDI4bXVIkblQDO5BpL7H244xlnylnQS6zjij74mqL6jzyzFMt4bCcJ7cL71WqNUl6fmCDYQu5eeKGs7ePkBFpqY3MXpMpGSa6USlzrI+KGvDZ8DfkhwRZgtH74wJFaYbJVpzbKHo9vvo7P2XQgTk/WHYI/xOA7j88b3qXZP5Mrr2B/FuYXFdFxT+jL4MHGuNf/IdFpkA0spg50ep5jqPZmTikf9RJuihX4e1HrCRqYGXbEl0ShsVZnfzfCEI/jTEcFlm3Sh2IYZAgj56y3oe+sD8JpLZOVpywkfCYycfKN8fokx3zhLJABlcT/J6dp3EnnHqphHujDILV9KZSwfvm5Sj/ZMmTPMCPUeJoUVxicoddP+DMAToD2H1TpMu8/s9HKmpXGTqEoQO33XK+lro6z6PPphDsffC0U+S5ljYlEYOFaXa2+2DX3IFw/QXg5tI4RcA8MPv++tYIGfBJ1ChOXQAhFO51pMF6Z8b5o8KcW2RA1xCDgL8s6qBLpljyxVoUlczCt+07LzshHix0kaeFkLEHlk/lMuLbtl2vBT4idoA3T8uLK8m3B+L3mdwU2NGvR1psgPffywrE+SS2f/4=
  file: "target/spt-development-test-${POM_VERSION}.jar"
  skip_cleanup: true
  on:
    tags: true
