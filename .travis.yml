language: java

jdk:
  - openjdk15

script:
  - mvn test -B

before_deploy:
  - POM_VERSION=$(mvn -q -Dexec.executable=echo -Dexec.args='${project.version}' --non-recursive exec:exec)

# Releases config copied from https://docs.travis-ci.com/user/deployment/releases/ and secure key generated by following
# https://stackoverflow.com/questions/25302518/travis-ci-setup-releases-with-github-token#answer-57032190
deploy:
  provider: releases
  api_key:
    secure: DI8VKS+3B4q+ZSgBTwXC+EQjZbHwxnfMm/Y26hzDXfLgWRxIILHWYCeusEnxBg4Ceo6C1gSmW0g9bpUEpu4tyKb51y958Of0E8PqnFE2zJQ+01gilE37DXtFxkr6qAY4LF8LgjMBb7erEHb3N76GGcCG2Q3o/pijkWAqFJXSZZOMgQk9ZClfS9W3RRQcbpKPi6hGfOY98lvdjlmELA61Z5W93VUr/Wyo60yjA4O9Zt392LOUW5NxidMfhwlCXTXZRRDl2mrVXgF3jm3PWr7ZuyipkVc/Rqq1FOuLKcgOwgnoSbL45TXgxhqpHrN6lbiRiMkqMvkPCqqj0EkUmfnLTz98/B8lSpvXceJkTke1xAbDwqWIT/7tofJAKTVms0XUnH//sPC0KLquh9w2Pnh9/zFuFZDauxmE+27t/vIVpnlDd8CytmCLgY8aniZwAVuASZCSaZMY8ziV1dRu5dsfgf8LRZm8CeTm6QqHJCqdYr3QvobvVd4dVSDiLBt/mzspojyZ6xZsHup9Ef8BHpglvLM58l3IihXIg0utxqTTT4lh1PfOX2ILDbYN2/50xqZSnc2cDPgfUiSyjaC5R6uc84UJ/4C8xpPBwyWPo0wuOlBQ3qrxJUpW1rcZ4GqiYi73YTuvdyoKYKIv7a828vBdrqwQpFfbsXVsR2SM92bv91c=
  file: "target/spt-development-test-${POM_VERSION}.jar"
  skip_cleanup: true
  on:
    tags: true
